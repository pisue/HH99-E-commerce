# 📦 E-Commerce 서비스

## 프로젝트 개요

- `e-커머스 상품 주문 서비스`를 구현해 봅니다.
- 상품 주문에 필요한 메뉴 정보들을 구성하고 조회가 가능해야 합니다.
- 사용자는 상품을 여러개 선택해 주문할 수 있고, 미리 충전한 잔액을 이용합니다.
- 상품 주문 내역을 통해 판매량이 가장 높은 상품을 추천합니다.

## 요구사항
- 아래 4가지 API 를 구현합니다.
```
  잔액 충전 / 조회 API
  상품 조회 API
  주문 / 결제 API
  인기 판매 상품 조회 API
```
- 각 기능 및 제약사항에 대해 단위 테스트를 반드시 하나 이상 작성하도록 합니다.
- 다수의 인스턴스로 어플리케이션이 동작하더라도 기능에 문제가 없도록 작성하도록 합니다.
- 동시성 이슈를 고려하여 구현합니다.
- 재고 관리에 문제 없도록 구현합니다.

---

## 📝 마일스톤

### 마일스톤 1: **프로젝트 설정 및 기본 구성**
- **1.1 작업**: 개발환경 준비
    - `의존성 설정` : Spring Data JPA, Spring Web, Lombok, MySQL, Spring Security 등/
    - `Architecture` : Layered Architecture Based (+) Clean


- **1.2 작업**: 데이터베이스 설정 (MySQL)
    - `application.yml`에 DB 연결 설정 추가
    - `PhysicalNamingStrategyStandardImpl`을 사용하여 테이블 명명 규칙 적용


- **1.3 작업**: 기본적인 엔티티 및 테이블 설계
    - `ERD` 설계
    - `User`, `Product`, `Order`, `Balance`, `Cart`, `Category` 등의 엔티티 클래스 작성
    - 각 엔티티에 맞는 리포지토리 인터페이스 정의

---

### 마일스톤 2: **잔액 충전 및 조회 API 구현**
- **2.1 작업**: 사용자 잔액 충전 기능 구현
    - `POST /balance/charge` API 설계 및 구현


- **2.2 작업**: 사용자 잔액 조회 기능 구현
    - `GET /balance/{userId}` API 설계 및 구현


- **2.3 작업**: 단위 테스트 작성
    - 잔액 충전 및 조회 기능에 대한 단위 테스트 추가

---

### 마일스톤 3: **상품 조회 API 구현**
- **3.1 작업**: 상품 정보(상품 ID, 이름, 가격, 잔여 수량) 조회 기능 구현
    - `GET /products` API 설계 및 구현


- **3.2 작업**: 동시성 이슈를 고려한 재고 조회 로직 구현
    - 재고가 실시간으로 정확하게 반영되도록 조회 로직 최적화


- **3.3 작업**: 단위 테스트 작성
    - 상품 정보 조회 기능에 대한 테스트 작성

---

### 마일스톤 4: **주문 및 결제 API 구현**
- **4.1 작업**: 주문 및 결제 처리 로직 구현
    - `POST /orders` API 설계 및 구현
    - 사용자 식별자와 상품 목록을 받아 주문 및 결제 처리
    - 충전된 잔액을 기반으로 결제 수행, 잔액 차감


- **4.2 작업**: 데이터 플랫폼 연동 (Mock API 사용)
    - 주문 성공 시 실시간으로 주문 정보를 외부 데이터 플랫폼에 전송하는 기능 추가


- **4.3 작업**: 동시성 제어 및 재고 관리
    - 동시 주문 처리 시 재고와 잔액이 정확하게 처리되도록 동시성 제어 로직 추가


- **4.4 작업**: 단위 테스트 작성
    - 주문 및 결제 API에 대한 테스트 케이스 작성

---

### 마일스톤 5: **인기 상품 조회 API 구현**
- **5.1 작업**: 인기 상품 조회 기능 구현
    - `GET /products/popular` API 설계 및 구현
    - 최근 3일간 가장 많이 팔린 상위 5개 상품 정보 제공


- **5.2 작업**: 통계 로직 설계
    - 판매 데이터를 기반으로 통계를 수집하고, 정렬하여 인기 상품을 반환하는 로직 구현


- **5.3 작업**: 단위 테스트 작성
    - 인기 상품 조회 기능에 대한 테스트 작성

---

### 마일스톤 6: **심화 과제: 장바구니 기능 구현**
- **6.1 작업**: 장바구니 추가 및 삭제 기능 구현
    - `POST /cart/add` 및 `DELETE /cart/remove` API 설계 및 구현


- **6.2 작업**: 장바구니 조회 API 구현
    - `GET /cart/{userId}` API 설계 및 구현


- **6.3 작업**: 단위 테스트 작성
    - 장바구니 기능에 대한 테스트 작성

---

## 플로우 차트 & 시퀀스 다이어그램
- [플로우 차트](docs/flow.md)

- [잔액 충전 및 조회 API](docs/diagram/balance-charge.md)

- [상품 조회 API](docs/diagram/products.md)

- [주문/결제 API](docs/diagram/order-payment.md)

- [인기 판매 상품 조회 API](docs/diagram/order-payment.md)


---

## ERD & API 명세

- [API 명세](docs/API.md)  
- [ERD](docs/erd.md)


---

## 기술 스택

### 현재 사용 중인 기술

- **Spring Boot**
- **Spring Data JPA**
- **Swagger**

### 추후 적용 예정 기술

- **JUnit**
- **Kafka**
- **Spring Security**
- **OAuth2**

### 데이터 베이스
- **MySQL**

## 환경 설정

- Java 17 이상
- Spring Boot 3.3.4